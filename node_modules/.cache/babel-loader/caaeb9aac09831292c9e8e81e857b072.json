{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/EmersonHoffman/Documents/emer_projects/web/src/pages/login/index.js\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport { login } from \"../../services/auth\";\nimport api from '../../services/api';\nimport './styles.css';\nimport Logo from \"../../images/logo.png\";\nexport default class Login extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      email: '',\n      senha: '',\n      error: ''\n    };\n\n    this.handleLogin = async e => {\n      e.preventDefault();\n      const {\n        email,\n        senha\n      } = this.state;\n\n      if (!email || !senha) {\n        this.setState({\n          error: \"Preencha e-mail e senha para continuar!\"\n        });\n      } else {\n        try {\n          const response = await api.post(\"/usuario/login\", {\n            login: email,\n            senha\n          });\n\n          if (response.data.statusCode === 200) {\n            if (response.data.usuario.admin) {\n              login(response.data.usuario.id); //armazena o token\n\n              console.log(response.data.usuario.id);\n              this.props.history.push(\"/inicio\");\n            } else {\n              this.setState({\n                error: 'Esse usuário não tem permissão para acessar a plataforma!'\n              });\n            }\n          } else {\n            this.setState({\n              error: response.data.message\n            });\n          }\n        } catch (err) {\n          this.setState({\n            error: \"Houve um problema com o login, verifique suas credenciais.\"\n          });\n        }\n      }\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: this.handleLogin,\n        className: \"form-style\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"div-style\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: Logo,\n            alt: \"Logo Magna\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"email\",\n            placeholder: \"Endere\\xE7o de E-mail\",\n            onChange: e => {\n              this.setState({\n                email: e.target.value\n              });\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            placeholder: \"Senha\",\n            onChange: e => {\n              this.setState({\n                senha: e.target.value\n              });\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 13\n        }, this), this.state.error && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: this.state.error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 34\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: \"Entrar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/EmersonHoffman/Documents/emer_projects/web/src/pages/login/index.js"],"names":["React","Component","Link","login","api","Logo","Login","state","email","senha","error","handleLogin","e","preventDefault","setState","response","post","data","statusCode","usuario","admin","id","console","log","props","history","push","message","err","render","target","value"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport { Link } from 'react-router-dom';\n\nimport { login } from \"../../services/auth\";\nimport api from '../../services/api';\nimport './styles.css';\nimport Logo from \"../../images/logo.png\";\n\nexport default class Login extends Component {\n    state = {\n        email: '',\n        senha: '',\n        error: ''\n    }\n\n    handleLogin = async e => {\n      e.preventDefault();\n\n      const { email, senha } = this.state;\n      \n      if (!email || !senha) {\n        this.setState({ error: \"Preencha e-mail e senha para continuar!\" });\n      } else {\n        try {\n          const response = await api.post(\"/usuario/login\", { login: email, senha });\n\n          if (response.data.statusCode === 200) {\n            if (response.data.usuario.admin) {\n              login(response.data.usuario.id); //armazena o token\n              console.log(response.data.usuario.id);\n              this.props.history.push(\"/inicio\");\n            } else {\n              this.setState({\n                error: 'Esse usuário não tem permissão para acessar a plataforma!'\n              });\n            }\n          } else {\n            this.setState({\n              error: response.data.message\n            });\n          }\n          \n        } catch (err) {\n          this.setState({\n            error:\n              \"Houve um problema com o login, verifique suas credenciais.\"\n          });\n        }\n      }\n    };\n\n    render() {\n      return (\n        <div className=\"container\">\n          <form onSubmit={this.handleLogin} className=\"form-style\">\n            <div className=\"div-style\">\n              <img src={Logo} alt=\"Logo Magna\" />\n              <input \n                type=\"email\"\n                placeholder=\"Endereço de E-mail\"\n                onChange={e => {this.setState({ email: e.target.value })}}\n              />\n              <input \n                type=\"password\" \n                placeholder=\"Senha\"\n                onChange={e => {this.setState({ senha: e.target.value })}}\n              />\n            </div>\n            {this.state.error && <p>{this.state.error}</p>}\n            <button type=\"submit\">Entrar</button>\n          </form>\n        </div>\n      );\n    }\n}"]},"metadata":{},"sourceType":"module"}