{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\Emerson\\\\Documents\\\\MagnaFarm\\\\web\\\\src\\\\pages\\\\login\\\\index.js\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport { login } from \"../../services/auth\";\nimport api from '../../services/api';\nimport './styles.css';\nimport Logo from \"../../images/logo.png\";\nexport default class Login extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      email: '',\n      senha: '',\n      error: ''\n    };\n\n    this.handleLogin = async e => {\n      e.preventDefault();\n      const {\n        email,\n        senha\n      } = this.state;\n\n      if (!email || !senha) {\n        this.setState({\n          error: \"Preencha e-mail e senha para continuar!\"\n        });\n      } else {\n        try {\n          const response = await api.post(\"/usuario/login\", {\n            email,\n            senha\n          });\n\n          if (response.data.statusCode === 200) {\n            if (response.data.usuario.admin) {\n              login(response.data.usuario.id); //armazena o token\n\n              console.log(response.data.usuario.id);\n              this.props.history.push(\"/inicio\");\n            } else {\n              this.setState({\n                error: 'Esse usuário não tem permissão para acessar a plataforma!'\n              });\n            }\n          } else {\n            this.setState({\n              error: response.data.message\n            });\n          }\n        } catch (err) {\n          this.setState({\n            error: \"Houve um problema com o login, verifique suas credenciais.\"\n          });\n        }\n      }\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: this.handleLogin,\n        className: \"form-style\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"div-style\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: Logo,\n            alt: \"Logo Magna\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"email\",\n            placeholder: \"Endere\\xE7o de E-mail\",\n            onChange: e => {\n              this.setState({\n                email: e.target.value\n              });\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            placeholder: \"Senha\",\n            onChange: e => {\n              this.setState({\n                senha: e.target.value\n              });\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 13\n        }, this), this.state.error && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: this.state.error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 34\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: \"Entrar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["C:/Users/Emerson/Documents/MagnaFarm/web/src/pages/login/index.js"],"names":["React","Component","Link","login","api","Logo","Login","state","email","senha","error","handleLogin","e","preventDefault","setState","response","post","data","statusCode","usuario","admin","id","console","log","props","history","push","message","err","render","target","value"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { login } from \"../../services/auth\";\r\nimport api from '../../services/api';\r\nimport './styles.css';\r\nimport Logo from \"../../images/logo.png\";\r\n\r\nexport default class Login extends Component {\r\n    state = {\r\n        email: '',\r\n        senha: '',\r\n        error: ''\r\n    }\r\n\r\n    handleLogin = async e => {\r\n      e.preventDefault();\r\n\r\n      const { email, senha } = this.state;\r\n      \r\n      if (!email || !senha) {\r\n        this.setState({ error: \"Preencha e-mail e senha para continuar!\" });\r\n      } else {\r\n        try {\r\n          const response = await api.post(\"/usuario/login\", { email, senha });\r\n\r\n          if (response.data.statusCode === 200) {\r\n            if (response.data.usuario.admin) {\r\n              login(response.data.usuario.id); //armazena o token\r\n              console.log(response.data.usuario.id);\r\n              this.props.history.push(\"/inicio\");\r\n            } else {\r\n              this.setState({\r\n                error: 'Esse usuário não tem permissão para acessar a plataforma!'\r\n              });\r\n            }\r\n          } else {\r\n            this.setState({\r\n              error: response.data.message\r\n            });\r\n          }\r\n          \r\n        } catch (err) {\r\n          this.setState({\r\n            error:\r\n              \"Houve um problema com o login, verifique suas credenciais.\"\r\n          });\r\n        }\r\n      }\r\n    };\r\n\r\n    render() {\r\n      return (\r\n        <div className=\"container\">\r\n          <form onSubmit={this.handleLogin} className=\"form-style\">\r\n            <div className=\"div-style\">\r\n              <img src={Logo} alt=\"Logo Magna\" />\r\n             \r\n\r\n              <input \r\n                type=\"email\"\r\n                placeholder=\"Endereço de E-mail\"\r\n                onChange={e => {this.setState({ email: e.target.value })}}\r\n              />\r\n\r\n              <input \r\n                type=\"password\" \r\n                placeholder=\"Senha\"\r\n                onChange={e => {this.setState({ senha: e.target.value })}}\r\n              />\r\n            </div>\r\n            {this.state.error && <p>{this.state.error}</p>}\r\n            <button type=\"submit\">Entrar</button>\r\n          </form>\r\n        </div>\r\n      );\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}